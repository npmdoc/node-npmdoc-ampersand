<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/ampersandjs/ampersand">ampersand (v3.0.6)</a>
</h1>
<h4>CLI tool for generating single page apps a. la. http://humanjavascript.com</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand">module ampersand</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.transformStream">
            function <span class="apidocSignatureSpan">ampersand.</span>transformStream
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.</span>fakeApi</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.</span>index</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.</span>staticRoutes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.</span>templates</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.</span>transformStream.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.fakeApi">module ampersand.fakeApi</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.fakeApi.add">
            function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>add
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.fakeApi.delete">
            function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>delete
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.fakeApi.get">
            function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>get
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.fakeApi.list">
            function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>list
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.fakeApi.update">
            function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>update
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.index">module ampersand.index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.index.form">
            function <span class="apidocSignatureSpan">ampersand.index.</span>form
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.index.model">
            function <span class="apidocSignatureSpan">ampersand.index.</span>model
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.staticRoutes">module ampersand.staticRoutes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.staticRoutes.register">
            function <span class="apidocSignatureSpan">ampersand.staticRoutes.</span>register
            <span class="apidocSignatureSpan">(plugin, options, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.templates">module ampersand.templates</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.templates.body">
            function <span class="apidocSignatureSpan">ampersand.templates.</span>body
            <span class="apidocSignatureSpan">(locals)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.templates.head">
            function <span class="apidocSignatureSpan">ampersand.templates.</span>head
            <span class="apidocSignatureSpan">(locals)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.templates.</span>includes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.templates.</span>jade</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ampersand.templates.</span>pages</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.transformStream">module ampersand.transformStream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.transformStream.transformStream">
            function <span class="apidocSignatureSpan">ampersand.</span>transformStream
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ampersand.transformStream.prototype">module ampersand.transformStream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ampersand.transformStream.prototype._transform">
            function <span class="apidocSignatureSpan">ampersand.transformStream.prototype.</span>_transform
            <span class="apidocSignatureSpan">(chunk, encoding, callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand" id="apidoc.module.ampersand">module ampersand</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.transformStream" id="apidoc.element.ampersand.transformStream">
        function <span class="apidocSignatureSpan">ampersand.</span>transformStream
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EncodeStream(config) {
    this.config = config;
    Transform.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.fakeApi" id="apidoc.module.ampersand.fakeApi">module ampersand.fakeApi</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.fakeApi.add" id="apidoc.element.ampersand.fakeApi.add">
        function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>add
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (req, res) {
    var person = req.body;
    person.id = id++;
    people.push(person);
    res.status(201).send(person);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.fakeApi.delete" id="apidoc.element.ampersand.fakeApi.delete">
        function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>delete
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (req, res) {
    var found = get(req.params.id);
    if (found) people = _.without(people, found);
    res.status(found ? 200 : 404);
    res.send(found);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// -----------------
// Set up our little demo API
// -----------------
var api = require('./fakeApi');
app.get('/api/people', api.list);
app.get('/api/people/:id', api.get);
app.<span class="apidocCodeKeywordSpan">delete</span>('/api/people/:id', api.delete);
app.put('/api/people/:id', api.update);
app.post('/api/people', api.add);


// -----------------
// Enable the functional test site in development
// -----------------
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.fakeApi.get" id="apidoc.element.ampersand.fakeApi.get">
        function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>get
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res) {
    var found = get(req.params.id);
    res.status(found ? 200 : 404);
    res.send(found);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
app.set('view engine', 'jade');


// -----------------
// Set up our little demo API
// -----------------
var api = require('./fakeApi');
app.<span class="apidocCodeKeywordSpan">get</span>('/api/people', api.list);
app.get('/api/people/:id', api.get);
app.delete('/api/people/:id', api.delete);
app.put('/api/people/:id', api.update);
app.post('/api/people', api.add);


// -----------------
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.fakeApi.list" id="apidoc.element.ampersand.fakeApi.list">
        function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>list
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (req, res) {
    res.send(people);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.fakeApi.update" id="apidoc.element.ampersand.fakeApi.update">
        function <span class="apidocSignatureSpan">ampersand.fakeApi.</span>update
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (req, res) {
    var found = get(req.params.id);
    if (found) _.extend(found, req.body);
    res.status(found ? 200 : 404);
    res.send(found);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.index" id="apidoc.module.ampersand.index">module ampersand.index</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.index.form" id="apidoc.element.ampersand.index.form">
        function <span class="apidocSignatureSpan">ampersand.index.</span>form
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">form = function (opts, cb) {
    opts = opts || {};
    var output = {};

    // build out our config
    var config = _.extend({
        model: (opts.modelpath) ? fs.readFileSync(opts.modelpath, 'utf8') : defaultModel,
        formtemplate: formTemplate,
        inputtemplate: inputTemplate,
        selecttemplate: selectInputTemplate,
        checkboxtemplate: checkboxInputTemplate,
        arrayinputtemplate: arrayInputTemplate
    }, opts);

    var fieldMap = {
        string: function(field) {
            requires.InputView = 'ampersand-input-view';
            return '            ' + processTemplate(config.inputtemplate, field).trim();
        },
        array: function(field) {
            requires.ArrayInputView = 'ampersand-array-input-view';
            return '            ' + processTemplate(config.arrayinputtemplate, field).trim();
        },
        boolean: function(field) {
            requires.CheckboxView = 'ampersand-checkbox-view';
            return '            ' + processTemplate(config.checkboxtemplate, field).trim();
        },
        select: function(field) {
            requires.SelectView = 'ampersand-select-view';
            return '            ' + processTemplate(config.selecttemplate, field).trim();
        }
    };

    fieldMap.number = fieldMap.string;

    var requires = {};

    // parse our JS
    var ast = esprima.parse(config.model);

    _.each(ast.body, function(item) {
        if (item.type === 'ExpressionStatement') {
            try {
                // last argument to `extend`
                var objectProperties = _.last(item.expression.right.arguments).properties;
                // get props
                var props = _.find(objectProperties, function(value) {
                    return value.type === 'Property' &amp;&amp; value.key.name === 'props';
                });
                props = props.value.properties;

                // handle different ways of providing types
                _.each(props, function(prop) {
                    var def = output[prop.key.name] = {};
                    if (prop.value.type === 'Literal') {
                        def.type = prop.value.value;
                    } else if (prop.value.type === 'ArrayExpression') {
                        def.type = prop.value.elements[0].value;
                    } else if (prop.value.type === 'ObjectExpression') {
                        _.find(prop.value.properties, function(prop) {
                            if (prop.type === 'Property' &amp;&amp; prop.key.name === 'type') {
                                def.type = prop.value.value;
                            }
                            if (prop.type === 'Property' &amp;&amp; prop.key.name === 'values') {
                                def.type = 'select';
                                def.options = _.map(prop.value.elements, function(element) {
                                    return element.raw;
                                });
                            }
                        });
                    }
                });
            } catch (e) {}
        }
    });

    var buff = [];

    _.each(output, function(definition, key) {
        var func = fieldMap[definition.type];
        if (func) {
            buff.push(func({
                name: key,
                label: toLabel(key),
                required: !!definition.required,
                options: definition.options
            }));
        }
    });

    var requireString = _.reduce(requires, function(buff, value, key) {
        return buff += 'var ' + key + ' = require(\'' + value + '\');\n';
    }, '');

    // make a string
    buff = buff.join(',\n');

    console.log('\nYou can install required views by running:\n$ npm install ' + _.values(requires).join(' ') + ' --save');

    cb(null, processTemplate(config.formtemplate, {
        fields: buff,
        requires: requireString
    }));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            fs.outputFileSync(collectionFilePath, clean(result.collection, config), 'utf8');
            console.log('new ' + chalk.magenta('Collection') + ' for ' + chalk.magenta(name) + '
; created as ' + chalk.magenta(path.relative(process.cwd(), collectionFilePath)));
        }
        console.log('');
        quit();
    });
} else if (type === 'form') {
    genTypes.<span class="apidocCodeKeywordSpan">form</span>({modelpath: name}, function (err, code) {
        fs.outputFileSync(filePath, clean(code, config), 'utf8');
        quit('new ' + chalk.magenta('Form') + ' for ' + chalk.magenta(path.basename(fileName)) + &amp;#
x27; created as ' + chalk.magenta(path.relative(process.cwd(), filePath)));
    });
} else {
    file = readFile(config[type]);
    if (!file) return quit('no template file found at ' + config[type]);
    file = clean(processTemplate(file, config), config);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.index.model" id="apidoc.element.ampersand.index.model">
        function <span class="apidocSignatureSpan">ampersand.index.</span>model
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">model = function (opts, cb) {
    opts || (opts = {});
    var name = opts.name;
    var fileName = _.kebabCase(name);

    // build out our config
    var config = _.extend({
        fileName: fileName,
        collectionFileName: fileName + '-collection',
        reqPath: 'ampersand-model',
        collectionTemplate: collectionTemplate,
        modelTemplate: modelTemplate,
        data: {
            id: 'something'
        }
    }, opts);

    var obj = findObj(config.data);
    var idKey = findId(obj);
    var result = {};

    // figure out our indent string
    config.indentString = (function() {
        if (config.useTabs) return '\t';
        return repeat(' ', config.indent);
    })();

    // sort with ID first
    var sorted = {};
    if (idKey) {
        sorted[idKey] = obj[idKey];
    }
    obj = _.extend(sorted, obj);

    // generate property definitions
    config.props = getProps(obj);

    if (!config.url) config.url = '/api/' + config.fileName;

    result.name = name;
    result.modelFileName = config.fileName + '.js';
    result.collectionFileName = config.collectionFileName + '.js';
    result.collection = processTemplate(config.collectionTemplate, config);
    result.model = processTemplate(config.modelTemplate, config);

    cb(null, result);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        stdin(function (input) {
if (input) {
    config.data = input;
}
if (type === 'model') {
    config.name = name;
    config.collectionToModelPath = collectionToModelPath;
    genTypes.<span class="apidocCodeKeywordSpan">model</span>(config, function (err, result) {
        var modelFilePath = path.join(config.folderPath, result.modelFileName);
        var collectionFilePath = path.join(collectionPath, result.collectionFileName);
        fs.outputFileSync(modelFilePath, clean(result.model, config), 'utf8');
        console.log('\nnew ' + chalk.magenta('Model') + ' created as ' + chalk.magenta(path.relative
(process.cwd(), modelFilePath)));
        if (config.makecollection) {
            fs.outputFileSync(collectionFilePath, clean(result.collection, config), 'utf8');
            console.log('new ' + chalk.magenta('Collection') + ' for ' + chalk.magenta(name) + '
; created as ' + chalk.magenta(path.relative(process.cwd(), collectionFilePath)));
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.staticRoutes" id="apidoc.module.ampersand.staticRoutes">module ampersand.staticRoutes</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.staticRoutes.register" id="apidoc.element.ampersand.staticRoutes.register">
        function <span class="apidocSignatureSpan">ampersand.staticRoutes.</span>register
        <span class="apidocSignatureSpan">(plugin, options, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (plugin, options, next) {
    // Tell Hapi to handle the public folder as a file directory
    plugin.route({
        method: 'GET',
        path: '/images/{param*}',
        handler: {directory: {path: 'public/images/'}}
    });

    // We expect those files to be availiable from the root of our web app
    plugin.route({
        method: 'GET',
        path: '/robots.txt',
        handler: {file: {path: 'public/robots.txt'}}
    });

    plugin.route({
        method: 'GET',
        path: '/favicon.ico',
        handler: {file: {path: 'public/favicon.ico'}}
    });

    next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return reply(response.state('config', encodeURIComponent(internals.clientConfig)));
}

return reply.continue();
});

// require moonboots_hapi plugin
server.<span class="apidocCodeKeywordSpan">register</span>([
{
    register: MoonBootsHapi.register,
    options: moonbootsConfig
},
{
    register: fakeApi.register
},
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.templates" id="apidoc.module.ampersand.templates">module ampersand.templates</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.templates.body" id="apidoc.element.ampersand.templates.body">
        function <span class="apidocSignatureSpan">ampersand.templates.</span>body
        <span class="apidocSignatureSpan">(locals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tmpl_body(locals) {
    var buf = [];
    buf.push('&lt;body&gt;&lt;div class="container"&gt;&lt;div class="navbar"&gt;&lt;div class="navbar-inner"&gt;&lt;a href="#" class="brand"&gt;{{{appTitle}}}&lt;/
a&gt;&lt;ul class="nav"&gt;&lt;li&gt;&lt;a href="/"&gt;home&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/collections"&gt;collection demo&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/info"&gt;more info&lt;/
a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;main id="pages"&gt;&lt;/main&gt;&lt;/div&gt;&lt;/body&gt;');
    return buf.join('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ampersand.templates.head" id="apidoc.element.ampersand.templates.head">
        function <span class="apidocSignatureSpan">ampersand.templates.</span>head
        <span class="apidocSignatureSpan">(locals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tmpl_head(locals) {
    var buf = [];
    buf.push('&lt;meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0"/&gt;&lt;meta name="apple-mobile-web
-app-capable" content="yes"/&gt;');
    return buf.join('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.transformStream" id="apidoc.module.ampersand.transformStream">module ampersand.transformStream</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.transformStream.transformStream" id="apidoc.element.ampersand.transformStream.transformStream">
        function <span class="apidocSignatureSpan">ampersand.</span>transformStream
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EncodeStream(config) {
    this.config = config;
    Transform.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ampersand.transformStream.prototype" id="apidoc.module.ampersand.transformStream.prototype">module ampersand.transformStream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ampersand.transformStream.prototype._transform" id="apidoc.element.ampersand.transformStream.prototype._transform">
        function <span class="apidocSignatureSpan">ampersand.transformStream.prototype.</span>_transform
        <span class="apidocSignatureSpan">(chunk, encoding, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_transform = function (chunk, encoding, callback) {
    chunk = chunk.toString();
    this.push(processString(chunk, this.config));
    callback();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>